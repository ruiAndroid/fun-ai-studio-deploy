server.port=7002
spring.application.name=funaistudiodeploy

spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER

# Swagger UI
springdoc.swagger-ui.path=/swagger-ui
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.enabled=true
spring.web.resources.add-mappings=true
springdoc.api-docs.enabled=true

logging.level.root=INFO

# -----------------------------
# Deploy Proxy Auth（API -> Deploy 内部调用鉴权）
# -----------------------------
# 本地开发默认关闭；生产建议开启并配置 shared-secret
deploy.proxy-auth.enabled=false
deploy.proxy-auth.allowed-ips=
deploy.proxy-auth.shared-secret=CHANGE_ME_STRONG_DEPLOY_PROXY_SECRET

# -----------------------------
# Deploy Admin（内部运维接口鉴权）
# -----------------------------
deploy.admin.enabled=true
deploy.admin.allowed-ips=
deploy.admin.token=CHANGE_ME_STRONG_ADMIN_TOKEN

# -----------------------------
# Runtime Node Registry（runtime 节点心跳注册）
# -----------------------------
deploy.runtime-node-registry.enabled=true
deploy.runtime-node-registry.allowed-ips=
deploy.runtime-node-registry.shared-secret=CHANGE_ME_STRONG_SECRET
deploy.runtime-node-registry.heartbeat-stale-seconds=60

# -----------------------------
# Runtime Node Registry / Placement 持久化（可选）
# -----------------------------
# 默认关闭：使用 InMemory（Deploy 重启会丢节点/落点数据）
# 开启方式：
# - deploy.runtime.persistence.enabled=true
# - 配置 spring.datasource.url / username / password（生产建议 MySQL）
deploy.runtime.persistence.enabled=false

# -----------------------------
# Deploy App Run（last-known）落库（可选）
# -----------------------------
# 类似 API 的 fun_ai_workspace_run：用于展示/审计/服务重启后保留“最后一次部署状态”。
deploy.run.persistence.enabled=false

# -----------------------------
# Deploy Job Queue 落库（可选）
# -----------------------------
# 生产建议开启：避免 Deploy 重启丢 job 状态；支持审计/追溯。
deploy.job.persistence.enabled=false

# Runner 在线状态判定阈值（秒）：Runner 每次 claim/heartbeat/report 都会刷新 lastSeen
deploy.runner-registry.heartbeat-stale-seconds=90


